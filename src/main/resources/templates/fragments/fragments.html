<!-- file with all the fragments (reusable code) used in this project's templates -->
<!-- TODO add buttons next to id# and Name attributes in table header for ascending and descending sorting -->
<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">

<!-- <head> with page title, charset, link to css -->
<head th:fragment="docHead">
  <meta charset="UTF-8">
  <title>Generic CRUD application</title>
  <link th:href="@{/css/styles.css}" rel="stylesheet" type="text/css">
</head>

<!-- <header> containing "navbar" -->
<header th:fragment="navbar">
  <h3>Generic CRUD application</h3>
  <nav>
    <a href="/" th:class="${browseLinkClass} + ' clickable'">Browse all entries</a>
    <a href="/search" th:class="${searchLinkClass} + ' clickable'">Search entries by name</a>
    <a href="/create" th:class="${createLinkClass} + ' clickable'">Create new entry</a>
  </nav>
</header>

<!-- <section> containing table view card with paging (table of entries to browse) -->
<section th:fragment="tableView" class="table-view">
  <ol>
    <li class="grid-item grid-header"> <!-- table header - names of columns -->
      <div>id#</div>
      <div>Name</div>
      <div>Content</div>
    </li>
    <li th:each="entry: ${entries}" class="grid-item"> <!-- general table row - definition of data fields shown to client -->
      <div th:text="${entry.entityId}"></div>
      <div th:text="${entry.entityName}"></div>
      <div th:text="${entry.entityContent}"></div>
      <!-- button for opening the detail view of a given entry (table row): -->
      <!-- uses multiple url arguments -->
      <a th:href="
      '?view=' + ${viewIndex} +
      '&id=' + ${entry.entityId} +
      '&searchedName=' + ${searchedName}" class="clickable">detail</a>
    </li>
  </ol>
  <ul id="table-view-navigation"> <!-- buttons for Browsing though the table -->
    <!-- PREVIOUS button - has multiple URL arguments -->
    <a th:unless="${createLinkClass}" th:href="
    '?view=' + ${viewIndex - 1} +
    '&id=' +${selectedID} +
    '&searchedName=' + ${searchedName}" class="previous-view clickable">PREVIOUS</a>
    <!-- indicator of the position of the table view within the full table, for example "4/6" -->
    <div th:text="${viewIndex + 1} + '/' + ${numberOfViews}" id="view-number"></div>
    <!-- NEXT button - has multiple URL arguments -->
    <a th:unless="${createLinkClass}" th:href="
    '?view=' + ${viewIndex + 1} +
    '&id=' +${selectedID} +
    '&searchedName=' + ${searchedName}" class="next-view clickable">NEXT</a>
  </ul>
</section>

<!-- <section> containing form with data fields, reset and update buttons -->
<section th:fragment="detailView" th:if="${displayDetail}" class="detail-view">
  <p th:if="${createLinkClass}">NEW ENTRY:</p>
  <!-- form used for either update or create action -->
  <!-- uses multiple url arguments -->
  <form th:action="
  '?view=' + ${viewIndex} +
  '&id=' +${selectedID} +
  '&searchedName=' + ${searchedName}"
        th:method="${formMethod}">
    <span th:unless="${createLinkClass}" th:text="'id# ' + ${selectedID}"></span>
    <!-- data fields -->
    <label>Name: <input th:field="${dBEntityDTO.entityName}" type="text"/></label>
    <label>Content: <input th:field="${dBEntityDTO.entityContent}" type="text"/></label>
    <!-- form buttons reset and update/create -->
    <input type="reset" value="Reset" class="clickable">
    <input type="submit" th:value="${formButton}" class="clickable">
  </form>
  <!-- delete button for the detail view -->
  <!-- relies on multiple url arguments -->
  <form th:unless="${createLinkClass}" th:fragment="deleteButton"
        th:action="
        '?view=' + ${viewIndex} +
        '&id=' +${selectedID} +
        '&searchedName=' + ${searchedName}"
        th:method="DELETE">
    <input type="submit" value="Delete" class="clickable"/>
  </form>
</section>


</html>